<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Employee Manager</a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <button
            type="button"
            class="nav-link btn btn-link active"
            (click)="openModal(null, 'add')"
          >
            Add Employee
          </button>
        </li>
      </ul>
      <form class="d-flex" (ngSubmit)="onSearch(searchInput.value)">
        <input
          #searchInput
          class="form-control me-2"
          type="search"
          placeholder="Search"
          aria-label="Search"
        />
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
    </div>
  </div>
</nav>
<br />

<div class="container" id="employeeContainer">
  <div class="row">
    @for (employee of employees; track $index) {
    <div class="col-md-6 col-xl-3">
      <div class="card m-b-30">
        <div class="card-body row">
          <div class="col-6">
            <a href="">
              <img
                src="{{ employee?.imageUrl }}"
                alt="{{ employee?.imageUrl }}"
                class="img-fluid rounded-circle w-60"
            /></a>
          </div>
          <div class="col-6 card-title align-self-center mb-0">
            <h5>{{ employee?.name }}</h5>
            <p class="m-0">{{ employee?.jobTitle | uppercase }}</p>
          </div>
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">
            <i class="fa fa-envelope float-end"></i>Email :
            <a href="mailto:{{ employee?.email }}">{{ employee?.email }}</a>
          </li>
          <li class="list-group-item">
            <i class="fa fa-phone float-end"></i>Phone : {{ employee?.phone }}
          </li>
        </ul>
        <div class="card-body">
          <div class="float-end btn-group btn-group-sm">
            <button
              type="button"
              class="btn btn-primary tooltips"
              data-placement="top"
              data-toggle="tooltip"
              data-original-title="Edit"
              (click)="openModal(employee, 'edit')"
            >
              <i class="fa fa-pencil"></i>
            </button>
            <button
              type="button"
              class="btn btn-secondary tooltips"
              data-placement="top"
              data-toggle="tooltip"
              data-original-title="Delete"
              (click)="openModal(employee, 'delete')"
            >
              <i class="fa fa-times"></i>
            </button>
          </div>
          <ul class="social-links list-inline mb-0">
            <li class="list-inline-item">
              <a
                title=""
                data-placement="top"
                data-toggle="tooltip"
                class="tooltips"
                href=""
                data-original-title="Facebook"
                ><i class="fa fa-facebook-f"></i
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                title=""
                data-placement="top"
                data-toggle="tooltip"
                class="tooltips"
                href=""
                data-original-title="Twitter"
                ><i class="fa fa-twitter"></i
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                title=""
                data-placement="top"
                data-toggle="tooltip"
                class="tooltips"
                href=""
                data-original-title="Skype"
                ><i class="fa fa-skype"></i
              ></a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    } @empty {
    <div>
      <h6>No Employee Found</h6>
    </div>
    }
  </div>

  <!-- Model to add Employee -->
  <div class="modal" id="employeeModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Add Employee</h4>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
          ></button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          <form #addForm="ngForm" (ngSubmit)="onAddEmployee(addForm)">
            <div class="form-group">
              <label for="">Name</label>
              <input
                type="text"
                class="form-control"
                name="name"
                ngModel
                required
              />
            </div>
            <div class="form-group">
              <label for="">Email</label>
              <input
                type="email"
                class="form-control"
                name="email"
                ngModel
                required
              />
            </div>
            <div class="form-group">
              <label for="">Job Title</label>
              <input
                type="text"
                class="form-control"
                name="jobTitle"
                ngModel
                required
              />
            </div>
            <div class="form-group">
              <label for="">Phone</label>
              <input
                type="number"
                class="form-control"
                name="phone"
                ngModel
                required
              />
            </div>
            <div class="form-group">
              <label for="">Image Url</label>
              <input
                type="text"
                class="form-control"
                name="imageUrl"
                ngModel
                required
              />
            </div>
            <div class="form-group">
              <label for="">EmployeeCode</label>
              <input
                type="text"
                class="form-control"
                name="employeeCode"
                ngModel
                required
              />
            </div>
            <div class="mt-3 d-flex justify-content-between align-items-center">
              <button
                type="button"
                class="btn btn-danger"
                data-bs-dismiss="modal"
                id="closeAddModal"
              >
                Close
              </button>
              <button
                [disabled]="addForm.invalid"
                type="submit"
                class="btn btn-primary text-end"
              >
                Submit
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Model to add Employee -->
  <div class="modal" id="updateEmployee">
    <div class="modal-dialog">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Edit Employee</h4>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
          ></button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          <form #editForm="ngForm">
            <div class="form-group">
              <label for="">Name</label>
              <input
                type="text"
                class="form-control"
                name="name"
                ngModel="{{ editEmployee?.name }}"
                required=""
              />
            </div>
            <div class="form-group">
              <label for="">Email</label>
              <input
                type="email"
                class="form-control"
                name="email"
                ngModel="{{ editEmployee?.email }}"
                required=""
              />
            </div>
            <div class="form-group">
              <label for="">Job Title</label>
              <input
                type="text"
                class="form-control"
                name="jobTitle"
                ngModel="{{ editEmployee?.jobTitle }}"
                required=""
              />
            </div>
            <div class="form-group">
              <label for="">Phone</label>
              <input
                type="number"
                class="form-control"
                name="phone"
                ngModel="{{ editEmployee?.phone }}"
                required=""
              />
            </div>
            <div class="form-group">
              <label for="">Image Url</label>
              <input
                type="text"
                class="form-control"
                name="imageUrl"
                ngModel="{{ editEmployee?.imageUrl }}"
                required=""
              />
            </div>
            <div class="form-group">
              <label for="">EmployeeCode</label>
              <input
                type="text"
                class="form-control"
                name="employeeCode"
                ngModel="{{ editEmployee?.employeeCode }}"
                readonly=""
              />
            </div>
            <div class="mt-3 d-flex justify-content-between align-items-center">
              <button
                type="button"
                class="btn btn-danger"
                data-bs-dismiss="modal"
                id="closeUpdateModal"
              >
                Close
              </button>
              <button
                [disabled]="editForm.invalid"
                type="submit"
                class="btn btn-primary text-end"
                (click)="onUpdateEmployee(editForm.value)"
              >
                Submit
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Delete Employee Modal -->
  <div class="modal" id="deleteEmployee">
    <div class="modal-dialog">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Delete Employee</h4>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
          ></button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          Are you sure you want to delete the employee ?
          <div class="mt-3 d-flex justify-content-between align-items-center">
            <button
              type="button"
              class="btn btn-danger"
              data-bs-dismiss="modal"
              id="closeDeleteModal"
            >
              Close
            </button>
            <button
              class="btn btn-primary text-end"
              (click)="onDeleteEmployee(deleteEmployee.id)"
            >
              Yes
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
